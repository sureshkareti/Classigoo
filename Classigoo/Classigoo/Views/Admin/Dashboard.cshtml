@model AdminDashboard
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";

    List<SelectListItem> statusCollection = new List<SelectListItem>();
    List<SelectListItem> reportType = new List<SelectListItem>();
    reportType.Add(new SelectListItem { Text = "AddsInfo", Value = "AddsInfo" });
    reportType.Add(new SelectListItem { Text = "Buyer/ConsumerInfo", Value = "Buyer/ConsumerInfo" });
    statusCollection.Add(new SelectListItem { Text = Constants.PendingSatus, Value = Constants.PendingSatus });
    statusCollection.Add(new SelectListItem { Text = Constants.ReviewSatus, Value = Constants.ReviewSatus });
    statusCollection.Add(new SelectListItem { Text = Constants.ActiveSatus, Value = Constants.ActiveSatus });
    statusCollection.Add(new SelectListItem { Text = Constants.DeactiveSatus, Value = Constants.DeactiveSatus });
    statusCollection.Add(new SelectListItem { Text = Constants.RejectSatus, Value = Constants.RejectSatus });


    List<SelectListItem> categoryCollection = new List<SelectListItem>();
    categoryCollection.Add(new SelectListItem { Text = Constants.AgriculturalVehicle, Value = Constants.AgriculturalVehicle });
    categoryCollection.Add(new SelectListItem { Text = Constants.ConstructionVehicle, Value = Constants.ConstructionVehicle });
    categoryCollection.Add(new SelectListItem { Text = Constants.PassengerVehicle, Value = Constants.PassengerVehicle });
    categoryCollection.Add(new SelectListItem { Text = Constants.RealEstate, Value = Constants.RealEstate });
    categoryCollection.Add(new SelectListItem { Text = Constants.TransportationVehicle, Value = Constants.TransportationVehicle });



}


<div class="row">

    <div class="col-sm-12">
        <div class="form-group row">
            <div class="col-xl-11 col-md-6 pull-right">
                <input type="button" class="btn btn-sm btn-danger pull-right" value="Send SMS" id="btnSendSms" />               
            </div>
            <div class="col-xl-1 col-md-6 pull-right">
                <input type="button" class="btn btn-sm btn-danger pull-right" value="Refresh" id="btnRefresh" />
            </div>
        </div>

    </div>

</div>

<div class="row">

    <div class="col-sm-12">

        <div class="row">


            <div class="col-xl-3 col-md-6">
                <div class="card-box widget-user" style="cursor:pointer" id="id1">
                    <div class="text-center">
                        <input type="text" class="form-control" id="txtAddidSearch" />
                        <h5>Add Id</h5>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-md-6">
                <div class="card-box widget-user">
                    <div class="text-center">
                        <input type="text" class="form-control" id="txtSubcategorySearch" />
                        <h5>Sub Category</h5>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-md-6">
                <div class="card-box widget-user">
                    <div class="text-center">

                        @Html.DropDownList("ddlCategorySearch", categoryCollection, "select", new { @class = "form-control" })

                        <h5>Category</h5>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-md-6">
                <div class="card-box widget-user">
                    <div class="text-center">
                        @Html.DropDownList("ddlStatusSearch", statusCollection, "select", new { @class = "form-control" })
                        <h5>Status</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="row">

    <div class="col-sm-12">

        <div class="row">
            <div class="col-12">
                <div class="card-box table-responsive">
                    <h4 class="m-t-0 header-title">Adds</h4>
                    <p class="text-muted font-14 m-b-30">
                        following are the adds which are <code> submitted by users</code>.
                    </p>
                    <table id="tblAdds" class="table table-striped table-bordered nowrap display responsive" style="width:100%">
                        <thead>
                            <tr>    
                                <th></th>     
                                <th data-class="expand">AddId</th>                                                                                     
                                <th data-class="expand">AddId</th>
                                <th data-hide="phone">Date and Time</th>
                                <th data-hide="phone">Sub Category</th>
                                <th data-hide="phone">Rent/Sale</th>
                                <th>Preview</th>
                                <th>Edit</th>
                                <th>Status</th>
                                <th data-hide="phone">User Name</th>
                                <th data-hide="phone">Mobile No</th>
                                <th data-hide="phone">Category</th>
                                <th data-hide="phone">State</th>
                                <th data-hide="phone">District</th>
                                <th data-hide="phone">Mandal</th>
                                <th>Remarks</th>
                                <th>Status</th>
                                <th>Action</th>
                                <th>Delete</th>
                                <th>User Name</th>
                                <th>Mobile No</th>
                            </tr>

                        </thead>

                        <tbody>
                            @foreach (var item in Model.AddsColl)
                            {

                                <tr>
                                    @*<td>@item.PhoneNum</td>*@
                                    <td></td> 
                                    <td>
                                        @item.AddId
                                    </td>                                                               
                                    <td id="addId">
                                        @item.AddId
                                    </td>
                                    <td>
                                        @item.Created
                                    </td>
                                    <td>
                                        @item.SubCategory
                                    </td>
                                    <td>
                                        @item.Type
                                    </td>

                                    <td>
                                        @Html.ActionLink("Preview", "PreviewAdd", "List", new { addId = @item.AddId }, new { target = "_blank", style = "color:#337ab7;" })

                                    </td>
                                    <td>
                                        @Html.ActionLink("Edit", "Index", "Post", new { addId = @item.AddId }, new { target = "_blank", style = "color:#337ab7;" })
                                    </td>


                                    <td>
                                        <span> <label id="lblStatus">@item.Status</label></span>


                                    </td>
                                    <td>
                                        @item.UserName
                                    </td>
                                    <td>
                                        @item.PhoneNum
                                    </td>


                                    <td>
                                        @item.Category
                                    </td>
                                    <td>
                                        @item.State
                                    </td>
                                    <td>
                                        @item.District
                                    </td>
                                    <td>
                                        @item.Mandal
                                    </td>


                                    <td>
                                        <span class="display-mode"> <label id="lblRemarks">@item.Remarks</label></span>
                                        @Html.TextArea("txtRemarks", item.Remarks, new { @class = "edit-mode", @maxlength = "1000", @style = "@width=350px;@height=80px" })
                                    </td>
                                    <td>
                                        <span class="display-mode"> <label id="lblAddStatus">@item.Status</label></span>
                                        @Html.DropDownList("ddlStatus", statusCollection, new { @class = "edit-mode" })
                                    </td>
                                    <td>
                                        <input type="button" value="Edit" class="edit-user display-mode" style="color:#337ab7;" onclick="FnEditCancel(event);" />
                                        <input type="button" class="save-user edit-mode" style="color:#337ab7;" value="Save" onclick="FnSave(event)" />
                                        <input type="button" class="cancel-user edit-mode" style="color:#337ab7;" value="Cancel" onclick="FnEditCancel(event);" />
                                    </td>
                                    <td>
                                        @Html.ActionLink("Delete", "Delete", "Post", new { addId = @item.AddId }, new { target = "", style = "color:#337ab7;" })
                                    </td>
                                    <td>
                                        <span id="userName" class="UserInfo">@item.UserName</span>
                                    </td>
                                    <td>
                                        <span id="userPhoneNum" class="UserInfo">@item.PhoneNum</span>
                                    </td>
                                </tr>

                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div> <!-- end row -->
    </div>

</div>

<!--  Modal content for the above example -->
<div id="myModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg" style="max-width:1000px;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title mt-0" id="myLargeModalLabel">Send SMS</h3>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">

                <div class="col-md-12">
                    <div>
                        <h4 class="m-t-0 m-b-30 header-title">Task Properties</h4>

                        <div id="divFormFields">

                            <div class="form-group row">
                                <label for="inputPassword3" class="col-2 col-form-label">Emails</label>
                                <div class="col-8">
                                    <div class="tags-default">
                                        <input type="text" id="txtMobileNumbers" value="suresh" data-role="tagsinput" placeholder="add emails" />
                                    </div>
                                </div>
                                <div class="col-2">

                                </div>
                            </div>



                        </div>

                        <div class="form-group mb-0 justify-content-end row">
                            <div class="col-9">
                                <button type="button" id="btnReloadPartial" class="btn btn-info waves-effect waves-light">Create Task</button>
                            </div>
                        </div>

                    </div>
                </div>


            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default waves-effect" data-dismiss="modal">close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



@section Styles {
    <!-- DataTables -->
    @*<link href="~/Content/List/responsive.bootstrap.min.css" rel="stylesheet" />*@
    <link href="~/Content/Admin/assets/plugins/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/Admin/assets/plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />
    @*<link href="https://cdn.datatables.net/responsive/1.0.7/css/responsive.dataTables.min.css" rel="stylesheet" type="text/css" />*@
    <link href="~/Content/Admin/assets/plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet" />
<link href="~/Content/Admin/assets/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" rel="stylesheet" />

    @*<link href="~/Content/Admin/assets/plugins/datatables/select.bootstrap4.min.css" rel="stylesheet" />*@
<link type="text/css" href="//gyrocode.github.io/jquery-datatables-checkboxes/1.2.11/css/dataTables.checkboxes.css" rel="stylesheet" />
}

@section scripts {

    <!-- Required datatable js -->

    <script src="~/Content/Admin/assets/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="~/Content/Admin/assets/plugins/datatables/dataTables.bootstrap4.min.js"></script>
    @*<script type="text/javascript" src="https://cdn.datatables.net/responsive/1.0.7/js/dataTables.responsive.min.js"></script>*@
    <script src="~/Content/Admin/assets/plugins/datatables/responsive.bootstrap4.min.js"></script>
    <script src="~/Content/Admin/assets/plugins/datatables/dataTables.responsive.min.js"></script>
    @*<script src="~/Content/Admin/assets/plugins/datatables/dataTables.select.min.js"></script>*@

<script src="~/Content/Admin/assets/plugins/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>


<script type="text/javascript" src="//gyrocode.github.io/jquery-datatables-checkboxes/1.2.11/js/dataTables.checkboxes.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            $('.edit-mode').hide();
            var table = $('#tblAdds').DataTable({
                "responsive": true,
                stateSave: true,
                columnDefs: [
                                {
                                  targets: 1,
                                  checkboxes: {
                                  selectRow: true
                                 },
                                 
                               },
                               {
                                   targets: 0,
                                   orderable:false
                                   
                               }
                               
                             ],
                select: {
                    style: 'multi'
                }
                ,
                order: [[2, 'asc']],
                initComplete: function () {
                    this.api().columns([2, 3, 6]).every(function () {
                        var column = this;
                        var select = $('<select><option value=""></option></select>')
                            .appendTo($(column.footer()).empty())
                            .on('change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );

                                column
                                    .search(val ? '^' + val + '$' : '', true, false)
                                    .draw();
                            });

                        column.data().unique().sort().each(function (d, j) {
                            // select.append('<option value="' + d + '">' + d + '</option>')
                            var val = $('<div/>').html(d).text();
                            select.append('<option value="' + val + '">' + val + '</option>');
                        });
                    });
                }

            });


            $('#txtAddidSearch').on('keyup', function () {
                table
                    .columns(1)
                    .search(this.value)
                    .draw();
            });
            $('#txtSubcategorySearch').on('keyup', function () {
                table
                    .columns(3)
                    .search(this.value)
                    .draw();
            });
            $('#ddlCategorySearch').on('change', function () {
                table
                      .columns(10)
                      .search(this.value)
                      .draw();
            });
            $('#ddlStatusSearch').on('change', function () {
                table
                      .columns(7)
                      .search(this.value)
                      .draw();
            });
            $("#btnRefresh").on('click', function () {
                table.state.clear();
                window.location.reload();
            });

            $("#btnSendSms").on('click', function () {

               console.log( $("#txtMobileNumbers").val());
                $("#myModal").modal("show");
            });

        });
    </script>
}