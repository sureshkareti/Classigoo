
@{
    Layout = null;
}
<style>
    .ui-autocomplete {
        cursor: pointer;
        height: 120px;
        overflow-y: scroll;
    }
    option{
        min-height:100px !important;
        width:50px !important;
        padding: 50px 0px !important;
    }
</style>

<div class="filter-form filter-header-form">
    <div class="form-group outer-select-field">
     
        @*<a class="input-dropedown-btn catagory-btn" href="javascript:void(0)">
            <i class="fa fa-bars" aria-hidden="true"></i> Categories
        </a>*@
        <select class="form-controls outer-select-input-box" id="listing_catagory_list">
            <option selected>Select Category</option>
        </select>
        @*<input type="text" class="form-control outer-select-input-box" id="listing_catagory_list" placeholder="Ex: Car, Mobile">*@
    </div>    
    <div class="form-group outer-select-field">
       
        @*<select class="form-control" id="listing_location_list">
            <option selected>Select Location</option>
        </select>*@
        @*<a class="input-dropedown-btn location-btn" href="javascript:void(0)">
            <i class="fa fa-crosshairs" aria-hidden="true"></i> Location
        </a>*@
        @*<input type="text" class="outer-select-input-box" id="listing_location_list" placeholder="Ex: Hyderabad, Warangal">*@
        <input type="text" id="listing_location_list" class="form-control outer-select-input-box" />
    </div>
    <div class="form-group outer-select-field">
        @*<a class="input-dropedown-btn" href="javascript:void(0)">
            <i class="fa fa-crosshairs" aria-hidden="true"></i> Keword
        </a>*@
        <input type="text" class="form-control outer-select-input-box" id="listing_keword" placeholder="Ex: Honda, Maruthi">
    </div>
    <div class="btn-group" id="divSearch">
        <button type="button" class="danger-btn" id="btnSearch">
            <i class="ti-search" aria-hidden="true"></i>
            Search
        </button>

    </div>
</div>

    <link href="~/Content/CustomeNew/Index1.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/CssNew/responsive.css" rel="stylesheet" />
    <link href="~/Content/CssNew/jquery-ui.min.css" rel="stylesheet" />

    @*<link href="@Url.Content("~/Content/CssNew/style.css")" rel="stylesheet" />*@
<script>
    $(document).ready(function () {
        FillCategories();
        FillLocations();
        var location = '@Session["Location"]';
        if (location) {
            $("#listing_location_list").attr("value", location);
        }
        else
        {
            $("#listing_location_list").attr("value", "All India");
        }
        $("#btnSearch").click(function () {
            window.location.href = "/New/ShowAdds?location=" + $("#listing_location_list").val();
        });
       
        function FillCategories() {
            $.ajax({
                url: '@Url.Action("GetCategories","Search")',
                type: 'GET',
                datatype:'json',
                success: function (data) {

                    $.each(data, function (i, field) {
                        $("#listing_catagory_list").append("<option>" + field.CategoryName + "</option>");
                    });
                  
                },
                failure: function (response) {
                    console.log(response.responseText);
                },
                error: function (response) {
                    console.log(response.responseText);
                },
                complete: function (data) {
                    //$("#requestOverlay").hide();/*Remove overlay*/
                }

            });
        }

        function FillLocations() {
            $.ajax({
                url: '@Url.Action("GetLocations", "Search")',
                type: 'GET',
                datatype: 'json',

                success: function (data) {

                    var locationColl = new Array();
                    locationColl.push("All India");
                    $.each(data, function (i, field) {
                        locationColl.push(field.LocationName);
                    });
                    jQuery.getScript("/Scripts/ScriptsNew/jquery-ui.min.js", function (data, status, jqxhr) {
                        $('#listing_location_list').autocomplete({
                            source: locationColl,
                            minLength: 0,
                            scroll: true,
                            matchContains:false, 
                            minChars:1,  
                            autoFill:false, 
                            mustMatch:true, 
                            cacheLength:20, 
                            max:20 ,
                            select: function (event, ui) {
                                console.log(ui.item.value);
                            },
                            response: function (event, ui) {
                                if (ui.content.length === 0) {
                                    $("#listing_location_list").val("All India");
                                } 
                            }
                           
                        }).blur(function(){
                            if ($("#listing_location_list").val()=="")
                            {
                                $("#listing_location_list").val("All India");
                            }
                        })

                   });
                 
                },
                failure: function (response) {
                    console.log(response.responseText);
                },
                error: function (response) {
                    console.log(response.responseText);
                },
                complete: function (data) {
                    //$("#requestOverlay").hide();/*Remove overlay*/
                }

            });
        }

    });

</script>